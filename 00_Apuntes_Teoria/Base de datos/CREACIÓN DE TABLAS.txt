CREATE TABLE DEPT
	(DEPT_NO NUMBER(2,0)
		CONSTRAINT DEP_PRIMARY_KEY PRIMARY KEY,
	DNOMBRE VARCHAR2(14)
		CONSTRAINT CHK_DNOMBRE CHECK(DNOMBRE IN('CONTABILIDAD','INVESTIGACIÓN','VENTAS','PRODUCCIÓN')),
	LOC VARCHAR2(14)
		CONSTRAINT CHK_LOC CHECK(LOC IN('MADRID','BARCELONA','SEVILLA','BILBAO'))
);


CREATE TABLE EMP
	(EMP_NO NUMBER(4,0)
		CONSTRAINT EMP_PRIMARY_KEY PRIMARY KEY,
	APELLIDO VARCHAR2(10)
		NOT NULL,
	OFICIO VARCHAR2(10)
		CONSTRAINT EMP_CHK_OFICIO CHECK(OFICIO IN('ANALISTA','DIRECTOR','EMPLEADO','PRESIDENTE','VENDEDOR')),
	DIR NUMBER(4,0)
		CONSTRAINT EMP_SELF_KEY REFERENCES EMP(EMP_NO),
	FECHA_ALT DATE
		DEFAULT SYSDATE,
	SALARIO NUMBER(10,0)
		CONSTRAINT EMP_CHK_SALARIO CHECK(SALARIO BETWEEN 100000 AND 999999),
	COMISION NUMBER(10,0),
	DEPT_NO NUMBER(2,0)
		NOT NULL,
		CONSTRAINT EMP_FOREIGN_KEY FOREIGN KEY(DEPT_NO) REFERENCES DEPT(DEPT_NO)
);

CREATE TABLE HOSPITAL(
	HOSPITAL_COD NUMBER(2)
		CONSTRAINT HOS_PRIMARY_KEY PRIMARY KEY,
	NOMBRE VARCHAR2(19)
		NOT NULL,
	DIRECCION VARCHAR2(20),
	TELEFONO VARCHAR2(9),
	NUM_CAMA NUMBER(3)
);

CREATE TABLE SALA(
	HOSPITAL_COD NUMBER(2)
		CONSTRAINT SALA_FOREIGN_KEY REFERENCES HOSPITAL(HOSPITAL_COD),
	SALA_COD NUMBER(2)
		NOT NULL,
	NOMBRE VARCHAR2(20)
		NOT NULL,
	NUM_CAMA NUMBER(3),
	CONSTRAINT SALA_PRIMARY_KEY PRIMARY KEY (HOSPITAL_COD,SALA_COD)
);

CREATE TABLE DOCTOR(
	HOSPITAL_COD NUMBER(2)
		CONSTRAINT DOCTOR_FOREIGN_KEY REFERENCES HOSPITAL(HOSPITAL_COD),
	DOCTOR_NO NUMBER(3)
		CONSTRAINT DOCTOR_PRIMARY_KEY PRIMARY KEY,
	APELLIDO VARCHAR2(20)
		NOT NULL,
	ESPECIALIDAD VARCHAR(13),
	SALARIO NUMBER(10)
);

CREATE TABLE PLANTILLA(
	HOSPITAL_COD NUMBER(2)
		NOT NULL,		
	SALA_COD NUMBER(2)
		NOT NULL,
	EMPLEADO_NO NUMBER(4)
		NOT NULL,
	APELLIDO VARCHAR2(15)
		NOT NULL,
	FUNCION VARCHAR2(10)
		CONSTRAINT PLANTILLA_CHK_FUNCION CHECK(FUNCION IN('ENFERMERO','ENFERMERA','INTERINO')),
	TURNO VARCHAR2(1)
		CONSTRAINT PLANTILLA_CHK_TURNO CHECK(TURNO IN('T','N','M')),
	SALARIO NUMBER(10),
	CONSTRAINT PLANTILLA_FOREIGN_KEY FOREIGN KEY(HOSPITAL_COD,SALA_COD) REFERENCES SALA(HOSPITAL_COD,SALA_COD),
	CONSTRAINT PLANTILLA_PRIMARY_KEY PRIMARY KEY(EMPLEADO_NO)
);

CREATE TABLE ENFERMO(
	INSCRIPCION NUMBER(5)
		CONSTRAINT ENFERMO_PRIMARY_KEY PRIMARY KEY,
	APELLIDO VARCHAR2(15),
	DIRECCION VARCHAR2(20),
	FECHA_NAC DATE,
	SEXO VARCHAR2(1)
		CONSTRAINT ENFERMO_CHK_SEXO CHECK(SEXO IN('M','F')),
	NSS NUMBER(15)
);

CREATE TABLE OCUPACION(
	INSCRIPCION NUMBER(5)		
		NOT NULL,
	HOSPITAL_COD NUMBER(2)
		NOT NULL,
	SALA_COD NUMBER(2)
		NOT NULL,
	CAMA NUMBER(4),
	CONSTRAINT OCUPACION_FOREIGN_KEY_INS FOREIGN KEY(INSCRIPCION) REFERENCES ENFERMO(INSCRIPCION),
	CONSTRAINT OCUPACION_FOREIGN_KEY_HOS_SAL FOREIGN KEY(HOSPITAL_COD,SALA_COD) REFERENCES SALA(HOSPITAL_COD,SALA_COD)
);